<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Microservices - Light Hybrid 4J</title>
    <meta name="generator" content="Hugo 0.20.6" />

    
    <meta name="description" content="Light Hybrid 4J Docs">
    
    <link rel="canonical" href="https://networknt.github.io/light-hybrid-4j/tutorial/setup/">
    
    <meta name="author" content="Steve Hu">
    

    <meta property="og:url" content="https://networknt.github.io/light-hybrid-4j/tutorial/setup/">
    <meta property="og:title" content="Light Hybrid 4J">
    <meta property="og:image" content="https://networknt.github.io/light-hybrid-4j/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Light Hybrid 4J">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://networknt.github.io/light-hybrid-4j/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://networknt.github.io/light-hybrid-4j/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://networknt.github.io/light-hybrid-4j/fonts/icon.eot');
        src: url('https://networknt.github.io/light-hybrid-4j/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://networknt.github.io/light-hybrid-4j/fonts/icon.woff')
               format('woff'),
             url('https://networknt.github.io/light-hybrid-4j/fonts/icon.ttf')
               format('truetype'),
             url('https://networknt.github.io/light-hybrid-4j/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://networknt.github.io/light-hybrid-4j/stylesheets/application.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-hybrid-4j/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-hybrid-4j/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://networknt.github.io/light-hybrid-4j/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://networknt.github.io/light-hybrid-4j/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-red palette-accent-teal">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Microservices
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/stevehu" title="@stevehu on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/networknt/light-hybrid-4j" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://networknt.github.io/light-hybrid-4j/images/logo.png">
        </div>
      
      <div class="name">
        <strong>Light Hybrid 4J <span class="version">1.4.3</span></strong>
        
          <br>
          networknt/light-hybrid-4j
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/networknt/light-hybrid-4j/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/networknt/light-hybrid-4j/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Getting started" href="https://networknt.github.io/light-hybrid-4j/getting-started/">
	
	Getting started
</a>



  
</li>



<li>
  
    



<a  title="Architecture" href="https://networknt.github.io/light-hybrid-4j/architecture/">
	
	Architecture
</a>



  
</li>



<li>
  
    



<a  title="Design" href="https://networknt.github.io/light-hybrid-4j/design/">
	
	Design
</a>



  
</li>



<li>
  
    



<a  title="Middleware" href="https://networknt.github.io/light-hybrid-4j/middleware/">
	
	Middleware
</a>



  
</li>



<li>
  
    



<a  title="Other Components" href="https://networknt.github.io/light-hybrid-4j/other/">
	
	Other Components
</a>



  
</li>



<li>
  
    



<a  title="DevOps" href="https://networknt.github.io/light-hybrid-4j/devops/">
	
	DevOps
</a>



  
</li>



<li>
  
    



<a  title="Tutorials" href="https://networknt.github.io/light-hybrid-4j/tutorial/">
	
	Tutorials
</a>



  
</li>



<li>
  
    



<a  title="Examples" href="https://networknt.github.io/light-hybrid-4j/example/">
	
	Examples
</a>



  
</li>



<li>
  
    



<a  title="Issues &amp; Help" href="https://github.com/networknt/light-4j/issues">
	
	Issues &amp; Help
</a>



  
</li>



<li>
  
    



<a  title="Roadmap" href="https://networknt.github.io/light-hybrid-4j/roadmap/">
	
	Roadmap
</a>



  
</li>



<li>
  
    



<a  title="License" href="https://www.apache.org/licenses/LICENSE-2.0">
	
	License
</a>



  
</li>



<li>
  
    



<a  title="Introduction" href="https://networknt.github.io/light-hybrid-4j/index.html">
	
	Introduction
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/stevehu" target="_blank" title="@stevehu on GitHub">
              @stevehu on GitHub
            </a>
          </li>
          

          
          <li>
            <a href="mailto:stevehu@gmail.com" title="Email of stevehu@gmail.com">
              Contact via email
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Microservices </h1>

			

<h2 id="introduction">Introduction</h2>

<p>Hybrid service is type of service between J2ee service and microservice. It can help some organizations to take step by step to fully adopt microservices.
User can split original large project to several Hybrid services to run at same JVM. From consumer side,  Hybrid services can be treated as microservices to be use.</p>

<p>Now on the tutorial, we are using light-eventuate-4j&rsquo;s todo-list example to generate and run hybrid service;</p>

<h2 id="prepare-workspace">Prepare workspace</h2>

<p>All specifications and code of the services are on github.com but we are going to
redo it again by following the steps in the tutorial. Let&rsquo;s first create a
workspace. I have created a directory named networknt under user directory.</p>

<p>Checkout related projects.</p>

<pre><code>cd ~/networknt
git clone git@github.com:networknt/light-4j.git
git clone git@github.com:networknt/light-hybrid-4j.git
git clone git@github.com:networknt/light-codegen.git
git clone git@github.com:networknt/light-eventuate-4j.git
git clone git@github.com:networknt/light-eventuate-example.git
git clone git@github.com:networknt/light-codegen.git



Go into the projects root folder above, and build the projects with maven

</code></pre>

<p>mvn clean install</p>

<pre><code>


## Use light-codegen to generate hybrid service project

Light-codegen use the schema JSON file as base to generate hybrid service project. We created a sample json config file under networknt/model-config project

you can checkout to you local for reference:

  -&gt;  git clone https://github.com/networknt/model-config.git


under the folder model-config/hybrid, you can see we have two hybrid services for todo-list:
 1 for command side hybrid service:  todocommand-service
 2 for query side hybrid service: todoquery-service

 Inside each folder, there are three json config files:

   serverConfig.json    -- config file for generating hybrid service server.
   config.json          -- config file for generating hybrid service project
   schema.json          -- schema config to define the service handler, action, version, data type, and validation

Now let's generate light-hybrid-4j service server first. The server can be a host to run Multiple service modules:

1.  Generate command side server, run following command on your workspace:

</code></pre>

<p>java -jar light-codegen/codegen-cli/target/codegen-cli.jar -f light-hybrid-4j-server -o light-eventuate-4j/command -c model-config/hybrid/todocommand-service/serverConfig.json</p>

<pre><code>
It will generate command module under light-eventuate-4j project. Please refer existing code in GitHub:

https://github.com/networknt/light-eventuate-4j/tree/master/command


2. Generate query side server, run following command on your workspace:

</code></pre>

<p>java -jar light-codegen/codegen-cli/target/codegen-cli.jar -f light-hybrid-4j-server -o light-eventuate-4j/query -c model-config/hybrid/todoquery-service/serverConfig.json</p>

<pre><code>
It will generate command module under light-eventuate-4j project. Please refer existing code in GitHub:

https://github.com/networknt/light-eventuate-4j/tree/master/query


3. Generate command side hybrid service under light-eventuate-example/todo-list project

</code></pre>

<p>java -jar light-codegen/codegen-cli/target/codegen-cli.jar -f light-hybrid-4j-service -o light-eventuate-example/todo-list/command-hybridservice -m model-config/hybrid/todocommand-service/schema.json -c model-config/hybrid/todocommand-service/config.json</p>

<pre><code>
 Please refer existing code in GitHub:

 https://github.com/networknt/light-eventuate-example/tree/master/todo-list/command-hybridservice

 4. Generate query side hybrid service under light-eventuate-example/todo-list project

</code></pre>

<p>java -jar light-codegen/codegen-cli/target/codegen-cli.jar -f light-hybrid-4j-service -o light-eventuate-example/todo-list/query-hybridservice -m model-config/hybrid/todoquery-service/schema.json -c model-config/hybrid/todoquery-service/config.json
 ```</p>

<p>Please refer existing code in GitHub:</p>

<p><a href="https://github.com/networknt/light-eventuate-example/tree/master/todo-list/query-hybridservice">https://github.com/networknt/light-eventuate-example/tree/master/todo-list/query-hybridservice</a></p>

<h1 id="ready">Ready</h1>

<p>Now we generate required server and service for hybrid service. Let&rsquo;s go to next step to develop and setup service</p>


			<aside class="copyright" role="note">
				
				&copy; 2017 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://networknt.github.io/light-hybrid-4j/tutorial/implementation/" title="Unit Test">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Unit Test
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/networknt.github.io\/light-hybrid-4j\/';
      var repo_id  = 'networknt\/light-hybrid-4j';
    
    </script>

    <script src="https://networknt.github.io/light-hybrid-4j/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

